import{X as i}from"./DlLfKX1o.js";const a=i(null);async function g(e,o){try{const s=window.location.port!=="8000"?"http://localhost:8000":"",n=await fetch(`${s}/api/auth/login/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:o})});if(!n.ok){const l=(await n.json()).error||"Failed to fetch user info";return console.log(l),!1}const t={token:(await n.json()).token,username:e};return localStorage.setItem("token",t.token),localStorage.setItem("username",t.username),a.set({token:t.token,username:t.username}),!0}catch(r){return console.error("Error during login:",r),!1}}function k(){const e=localStorage.getItem("token"),o=localStorage.getItem("username");e&&o&&a.set({token:e,username:o})}function f(){localStorage.removeItem("token"),localStorage.removeItem("username"),a.set(null)}export{f as a,k as i,g as l,a as u};
