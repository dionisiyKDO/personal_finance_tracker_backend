import{c as D,b as e,t as l}from"../chunks/BPOysvG9.js";import{i as rt}from"../chunks/XqrSmV0d.js";import{Y as at,Z as u,_ as ot,$ as o,v as t,a0 as s,a1 as p,a2 as m,w as st}from"../chunks/C-rDJMBQ.js";import{s as c}from"../chunks/DgqPHchW.js";import{a as nt}from"../chunks/BUlX02mU.js";import{s as it,a as lt,i as _}from"../chunks/C_hza7l9.js";import{e as vt,i as pt}from"../chunks/CskFB5GT.js";import{u as ct}from"../chunks/DO4y2VjW.js";async function dt(x){try{if(!x)return null;const y=window.location.port!=="8000"?"http://localhost:8000":"",d=await fetch(`${y}/api/transactions/`,{method:"GET",headers:{Authorization:`Token ${x.token}`,"Content-Type":"application/json"}});if(!d.ok){const h=(await d.json()).error||"Failed to fetch transactions";return console.log(h),null}return await d.json()}catch(g){return console.error("Error during login:",g),null}}var ft=l('<p class="text-3xl font-semibold text-gray-500 px-4">No transactions found.</p>'),ut=l('<p class="text-sm text-gray-500"> </p>'),mt=l('<p class="text-2xl font-bold text-red-600"> </p>'),_t=l('<p class="text-2xl font-bold text-green-600"> </p>'),xt=l('<div class="flex justify-between items-center odd:bg-[--muted-surface] px-4 py-4"><h3 class="text-lg font-semibold text-gray-200"> </h3> <!> <!> <p class="text-sm text-gray-500"> </p></div>'),gt=l('<h3 class="text-3xl font-semibold text-[--foreground] border-b border-[--border] pb-2 px-4">Recent Transactions</h3> <!>',1),ht=l('<div class="bg-[--surface] pt-4 rounded-lg shadow"><!></div> <div class="mt-8 p-4 bg-[--surface] rounded"><h3 class="text-sm font-mono">Debug Data:</h3> <pre class="text-xs overflow-auto"> </pre></div>',1),bt=l('<div class="flex items-center justify-center h-64"><p class="text-gray-500">Loading your transactions...</p></div>');function Dt(x,g){at(g,!1);const[y,d]=lt(),E=dt(it(ct,"$user",y));rt();var h=D(),J=u(h);nt(J,()=>E,w=>{var v=bt();e(w,v)},(w,v)=>{var N=ht(),$=u(N),L=o($);{var O=n=>{var b=ft();e(n,b)},Y=n=>{var b=gt(),H=p(u(b),2);vt(H,1,()=>t(v),pt,(I,i,K)=>{var A=D(),M=u(A);{var P=j=>{var k=xt(),T=o(k),Q=o(T,!0);s(T);var B=p(T,2);{var U=r=>{var a=ut(),f=o(a,!0);s(a),m(()=>c(f,t(i).category)),e(r,a)};_(B,r=>{t(i).category&&r(U)})}var C=p(B,2);{var V=r=>{var a=mt(),f=o(a);s(a),m(()=>c(f,`-${t(i).amount??""}`)),e(r,a)},W=r=>{var a=D(),f=u(a);{var tt=S=>{var q=_t(),et=o(q,!0);s(q),m(()=>c(et,t(i).amount)),e(S,q)};_(f,S=>{t(i).type==="income"&&S(tt)},!0)}e(r,a)};_(C,r=>{t(i).type==="expense"?r(V):r(W,!1)})}var F=p(C,2),X=o(F,!0);s(F),s(k),m(()=>{c(Q,t(i).vendor),c(X,t(i).date)}),e(j,k)};_(M,j=>{K<5&&j(P)})}e(I,A)}),e(n,b)};_(L,n=>{t(v)===null||t(v).length===0?n(O):n(Y,!1)})}s($);var R=p($,2),z=p(o(R),2),Z=o(z,!0);s(z),s(R),m(n=>c(Z,n),[()=>JSON.stringify(t(v),null,2)],st),e(w,N)}),e(x,h),ot(),d()}export{Dt as component};
